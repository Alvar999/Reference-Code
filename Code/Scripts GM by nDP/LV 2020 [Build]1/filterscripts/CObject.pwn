#include <a_samp>
#undef MAX_PLAYERS
#define MAX_PLAYERS 500
#include <streamer>

	//CreateDynamicObject(10816, 390.70734, 3020.72217, 6.58120,   0.00000, 0.00000, 2.00000, .worldid = 0, .streamdistance = 1500);

public OnFilterScriptExit()
{
    for(new i; i < MAX_PLAYERS; i++)
	{
	    if(IsPlayerConnected(i))
	    	if(GetPlayerVirtualWorld(i) != 0 || GetPlayerInterior(i) != 0) TogglePlayerControllable(i, false);
	}
}

public OnFilterScriptInit()
{
    for(new i; i < MAX_PLAYERS; i++)
	{
	    if(IsPlayerConnected(i))
	    	if(GetPlayerVirtualWorld(i) != 0 || GetPlayerInterior(i) != 0) TogglePlayerControllable(i, false);
	}
	//====//
    new tmpobjid;
	tmpobjid = CreateObject(8483, 2015.774658, 1008.468627, 19.490310, 0.000000, 0.000000, 0.000000, 1000.00);
	SetObjectMaterial(tmpobjid, 0, 16646, "a51_alpha", "stanwind_nt", 0x00000000);
	tmpobjid = CreateObject(19378, 2022.114013, 993.006103, 10.326011, 0.000000, 0.000000, 0.000000, 1000.00);
	SetObjectMaterial(tmpobjid, 0, 16644, "a51_detailstuff", "a51_map", 0x00000000);
	/////////////////////////////////////////////////////////////////////////////////////////////////////////////////
	/////////////////////////////////////////////////////////////////////////////////////////////////////////////////
	/////////////////////////////////////////////////////////////////////////////////////////////////////////////////
	tmpobjid = CreateObject(19865, 2021.269165, 1012.009277, 8.870316, 0.000000, 0.000000, -90.200019, 1000.00);
	tmpobjid = CreateObject(19865, 2024.911865, 1011.994750, 8.870316, 0.000000, 0.000000, -90.200019, 1000.00);
	tmpobjid = CreateObject(19865, 2024.883422, 1003.684204, 8.870316, 0.000000, 0.000000, -90.200019, 1000.00);
	tmpobjid = CreateObject(19865, 2021.212158, 1003.698425, 8.870316, 0.000000, 0.000000, -90.200019, 1000.00);
	tmpobjid = CreateObject(11698, 2020.410522, 1007.711914, 10.280314, 0.000000, 0.000000, 89.500068, 1000.00);
	tmpobjid = CreateObject(11698, 2023.340698, 1007.686523, 10.280314, 0.000000, 0.000000, 89.500068, 1000.00);
	tmpobjid = CreateObject(11698, 2025.902709, 1007.665222, 10.280314, 0.000000, 0.000000, 89.500068, 1000.00);
	tmpobjid = CreateObject(869, 2021.462890, 1013.994628, 10.290319, 0.000000, 0.000000, 0.000000, 1000.00);
	tmpobjid = CreateObject(869, 2023.952392, 1013.994628, 10.290319, 0.000000, 0.000000, 0.000000, 1000.00);
	tmpobjid = CreateObject(869, 2025.377197, 1013.831359, 10.290319, 0.000000, 0.000000, 173.400070, 1000.00);
	tmpobjid = CreateObject(869, 2025.519653, 1015.052551, 10.290319, 0.000000, 0.000000, -38.899898, 1000.00);
	tmpobjid = CreateObject(7388, 2025.763061, 1022.987548, 9.820312, 0.000000, 0.000000, 0.000000, 1000.00);
	tmpobjid = CreateObject(11724, 2021.337402, 998.759704, 10.350312, 0.000000, 0.000000, 179.900085, 1000.00);
	tmpobjid = CreateObject(19632, 2021.348510, 998.865295, 9.820312, 0.000000, 0.000000, 0.000000, 1000.00);
	tmpobjid = CreateObject(19076, 2024.265136, 1001.004272, 9.830313, 0.000000, 0.000000, 0.000000, 1000.00);
	tmpobjid = CreateObject(19054, 2025.202514, 1000.205322, 10.300316, 0.000000, 0.000000, 0.000000, 1000.00);
	tmpobjid = CreateObject(19055, 2024.793457, 1001.717712, 10.360314, 0.000000, 0.000000, 0.000000, 1000.00);
	tmpobjid = CreateObject(19056, 2023.461181, 1000.971740, 10.260314, 0.000000, 0.000000, 0.000000, 1000.00);
	tmpobjid = CreateObject(14637, 2028.632690, 1007.619750, 17.790319, 0.000000, 0.000000, 0.000000, 1000.00);
	tmpobjid = CreateObject(3533, 2027.187377, 1002.860961, 14.010306, 0.000000, 0.000000, 0.000000, 1000.00);
	tmpobjid = CreateObject(3533, 2027.187377, 1012.921203, 14.010306, 0.000000, 0.000000, 0.000000, 1000.00);
	tmpobjid = CreateObject(13667, 2024.411987, 993.467529, 29.113107, 0.000000, 0.000000, 10.500005, 1000.00);
	tmpobjid = CreateObject(19443, 2027.577270, 991.060913, 9.700294, -90.299980, 0.000000, 0.000000, 1000.00);
	tmpobjid = CreateObject(19443, 2025.921142, 990.131713, 10.413966, -0.099987, 89.600021, -0.099999, 1000.00);
	tmpobjid = CreateObject(19443, 2023.648437, 990.135864, 10.398146, -0.099987, 89.600021, -0.099999, 1000.00);
	tmpobjid = CreateObject(19443, 2023.651733, 991.725646, 10.395368, -0.099987, 89.600021, -0.099999, 1000.00);
	tmpobjid = CreateObject(19443, 2023.654052, 993.286071, 10.392645, -0.099987, 89.600021, -0.099999, 1000.00);
	tmpobjid = CreateObject(19443, 2023.656250, 994.886413, 10.389859, -0.099987, 89.600021, -0.099999, 1000.00);
	tmpobjid = CreateObject(19443, 2023.658325, 996.486877, 10.387077, -0.099987, 89.600021, -0.099999, 1000.00);
	tmpobjid = CreateObject(19443, 2025.924072, 991.731811, 10.411174, -0.099987, 89.600021, -0.099999, 1000.00);
	tmpobjid = CreateObject(19443, 2025.925170, 993.302795, 10.408440, -0.099987, 89.600021, -0.099999, 1000.00);
	tmpobjid = CreateObject(19443, 2025.926513, 994.903686, 10.405660, -0.099987, 89.600021, -0.099999, 1000.00);
	tmpobjid = CreateObject(19443, 2025.928466, 996.484252, 10.402911, -0.099987, 89.600021, -0.099999, 1000.00);
	tmpobjid = CreateObject(19443, 2027.577270, 994.550964, 9.682025, -90.299980, 0.000000, 0.000000, 1000.00);
	tmpobjid = CreateObject(19443, 2027.577270, 995.531494, 9.676887, -90.299980, 0.000000, 0.000000, 1000.00);
	tmpobjid = CreateObject(19928, 2024.380737, 993.443603, 10.491769, 0.000000, 0.000000, -88.900047, 1000.00);
	tmpobjid = CreateObject(19928, 2024.422485, 991.383483, 10.151771, 0.000000, 0.000000, -88.900047, 1000.00);
	tmpobjid = CreateObject(19928, 2024.343505, 995.512573, 9.931770, 0.000000, 0.000000, -88.900047, 1000.00);
	tmpobjid = CreateObject(4640, 2027.364379, 1023.023376, 11.520313, 0.000000, 0.000000, 90.799995, 1000.00);
	//====//
	for(new i, Float: fPlayerPos[3]; i < MAX_PLAYERS; i++)
	{
	    if(IsPlayerConnected(i))
		    if(GetPlayerVirtualWorld(i) != 0 || GetPlayerInterior(i) != 0)
			{
				GetPlayerPos(i, fPlayerPos[0], fPlayerPos[1], fPlayerPos[2]);
				Streamer_UpdateEx(i, fPlayerPos[0], fPlayerPos[1], fPlayerPos[2]);
				CallRemoteFunction("Player_StreamPrep", "ifffi", i, fPlayerPos[0], fPlayerPos[1], fPlayerPos[2], 2500);
			}
	}
	// Headroom for static objects - streamed limits are completely independent (cause of old crashing)
	Streamer_VisibleItems(STREAMER_TYPE_OBJECT, 965);
}
